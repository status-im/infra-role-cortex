---
groups:
  - name: statusd
    rules:
    # Alert when node gets close to MaxPeers statusd limit
    - alert: ReachingStatusdMaxPeers
      expr: (sum by(instance)(p2p_peers_count) / sum by (instance)(p2p_peers_max)) * 100 > 80
      for: 3m
      annotations:
        summary: "Passed 80% of MaxPeers at {{ $labels.instance }} " 
        description: "The host {{ $labels.instance }} running statusd went past 80% of MaxPeers limit." 
        current_value: "{{ $value }}%" 
